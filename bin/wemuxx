#!/usr/bin/env bash

list=$(wemux list)

regex=" <- current server$"

if [[ ! $list =~ 'No wemux servers' ]]; then
  echo "${list}"
  echo ""
  echo "* Select a server by number/name"
fi

if [[ $list =~ $regex ]]; then 
  echo "* Hit Enter for current server"; 
fi
echo "* Type a name for a new server"

printf "Server: "
read choice

if [ -n "${choice}" ]; then
  echo "Joining $choice"
  wemux join $choice && wemux
else
  echo "Joining current server"
  wemux
fi
